# 基础

1. 变量的分类，数字常量默认都是double类型

1. ![image-20220502210213475](Matlab基础.assets/image-20220502210213475.png)

3. 数据类型转换，并不会改变原来变量的类型：

   ```matlab
   double()  %转化为double类型
   single()
   int8()
   int16()
   int32()
   int64()
   uint8()
   uint16()
   uint32()
   uint64()
   ```

4. 字符就是长度为1的字符串，每个字符用1个字节存储：

   ```matlab
   >>a = "sd";  #a就是1x2的char类型,可以当作向量来使用。
   >> uint8(a)  #转为数字向量
   ans =
     115  100
   %字符串拼接
   >> ["as" "de"]  %水平拼接,结果为1x4的char类型
   ans = asde
   >> ["as";"de"]  %竖向拼接,结果为2x2的char类型
   ans =
   as
   de
   >> "abcd"(2)  %可以将字符串当作字符向量来看到，用索引来取元素
   ans = b
   strcmp("ab","bc");  %比较两个字符串是否完全相等。
   ```

1. 特殊的变量和常量：

   1. ans：answer的缩写，如果计算结果没有显式指定给某个变量的话，默认会存储到这里。
   2. i，j：虚数单位
   3. inf：无穷大 ∞
   4. eps：2.2204e-16，一般用来作为浮点数相当的界限
   5. NaN：not a number
   6. pi：圆周率的精确值

2. ```matlab
   >> 1+i
   ans =  1 + 1i
   >> 1/0
   ans = Inf
   >> 0/0
   ans = NaN
   ```

3. 输入iskeyword命令来查看所有的关键字，变量名要避开这些关键字。

   ```matlab
   >> cos(8)
   ans = -0.1455
   cos = "This string"  %会覆盖内置的cos函数。
   >> cos(8)    %表示获取字符串的第8个字符,下标从1开始。
   ans = r
   >> clear cos  %清理用户定义的名字，恢复系统默认的
   >> cos(8)
   ans = -0.1455
   ```

4. format指令控制数字的显示样式，不加任何参数就是默认的short：

   ```matlab
   >> pi
   ans = 3.1416
   >>  pi-3.1416
   ans = -7.3464e-06  %可以证明pi的实际值3.1416，只是显示为3.1416
   >> format long     %双精度浮点数
   >> pi
   ans = 3.141592653589793
   >> format shortE       %单精度科学计数法
   >> pi
   ans = 3.1416e+00
   >> format longE        %双精度科学计数法
   >> pi
   ans = 3.141592653589793e+00
   >> format hex          %16进制显示
   >> pi
   ans = 400921fb54442d18
   >> format rat          %将结果有理数显示
   >> pi
   ans = 355/113
   >> 3/13
   ans = 3/13
   ```

5. 语句最后如果没有分号，会将结果输出到界面上，不过并不会影响是否赋值给ans

   ```matlab
   >> 3
   ans = 3
   >> 5;
   >> 3+5
   ans = 8
   >> 3+6;    %仍会将计算结果赋值给ans
   >> ans
   ans = 9
   ```

6. 常用命令：

   ```matlab
   clc  %清理屏幕的输出,快捷键为Ctrl+L
   clear %清理工作空间的所有变量
   who   %列出工作空间的所有变量
   whos  %列出工作空间的所有变量的详细信息
   ```

7. 向量：

   ```matlab
   a = [1 2 3 4]   %行向量 维度为4x1。也可以用逗号分隔  [1,2,3,4]
   b = [1; 2; 3; 4] %列向量 维度为1x4
   ̃>> a*b  %将向量当作矩阵来计算乘法
   ans = 30
   >> b*a  %结果为4x4的矩阵
   ans =
   
       1    2    3    4
       2    4    6    8
       3    6    9   12
       4    8   12   16
   ```

8. 矩阵：

   ```matlab
   >> a = [1 2 3;4 5 6;7 8 9]
   a =
      1   2   3
      4   5   6
      7   8   9
   ```

13. Matlab用（）来做向量和矩阵的索引。

    ```matlab
    >> a = [1 2 3;4 5 6;7 8 9]
    a =
       1   2   3
       4   5   6
       7   8   9
    >> a(4)     %将矩阵划分为列向量组，从左到右拼接成一个列向量，再做索引。
    ans = 2
    a(2,3)     %第2行，第3列的元素
    ans = 6
    >> a([1 2 5]) %等价于从列向量组拼成的向量中取出3个数。
    ans =
    
       1   4   5
    >> a([1 3],[1 3])  %按照[1 3],[1 3]的方式取出子矩阵，可以看作是a(2,3)的扩展，行和列的索引都变成了向量。这里不能将[1 3],[1 3]看作两个行向量的水平拼接，因为这里的逗号是用作索引的区分。而在[1 3],[1 3]外边加上[]后才可以当成行向量的水平拼接，
    ans =
       1   3
       7   9
    >> a([[1 3],[1 3]])
    ans =
       1   7   1   7
    >> a([1 2;3 4])  %从列向量组拼成的向量中，依次取出[1 2;3 4]，组成一个二阶矩阵。
    ans =
       1   4
       7   2
    %%%%%%%%%
    >> b(1)=1; %之前可以不用声明b是一个向量，可以直接写入
    >> b(3)=3; %间隔写入，会导致中间的都被写入为0
    >> b(2)
    ans = 0
    >> b(4)    %没有声明不能直接读取
    error: b(4): out of bound 3 (dimensions are 1x3)
    %%%%%%%%%
    %索引也可以是logical的向量
    >> a = [1 2 3 4 ];
    >>  a(logical([1 0 1]))  %按照下标的逻辑值取出向量的元素，构成新的向量，索引必须为logical的向量。
    ans =
       1   3
    >> a(a == 2) =6     %将向量a中等于2的元素都赋值为6
    a =
    
       1   6   3   4
    ```

14. 为数组预先分配内存会提高速度：

    ```matlab
    %没有为数组预先分配内存
    tic  %计时开始
    for i=1:2000
      for j=1:2000
        A(i,j) = i+j;
      end
    end
    toc  %计时结束 Elapsed time is 25.3265 seconds.
    %为数组预先分配内存
    tic
    A = zeros(2000);
    for i=1:2000
      for j=1:2000
        A(i,j) = i+j;
      end
    end
    toc  %Elapsed time is 14.4251 seconds.
    ```

10. 冒号运算符，用来生成等比数列的向量，默认公差为1。在作为索引时，还表示全部行或列的意思。

    ```matlab
    a = [1:5]   %等价于a = [1 2 3 4 5] 也可以省略中括号写作a = 1:5
    a = [1:2:5] %等价于[1 3 5]
    a = [1:2:4] %结果为[1 3]
    >> a = [1:3;2:4]
    a =
       1   2   3
       2   3   4
    >> a(1,:)     %获取矩阵a的第一行和所有列构成的子矩阵。
    ans =
       1   2   3
    >> a(:,[1 3]) %获取矩阵的第1和3列构成的子矩阵。
    ans =
       1   3
       2   4
    >> linspace (1,5,3)  %将区间[1,5]做3-1等分，结果有3个点，包括起止点。结果存储在一个行向量中，第三个参数默认为100。
    ans =
       1   3   5
    ```

11. 矩阵的拼接：

    ```matlab
    >> A = [1 2; 3 4];     %也可以看作为两个行向量的竖向拼接
    >> A = [[1;3] [2;4]];  %也可以用列向量水平拼接来构造矩阵
    >> B = [5 6;7 8];
    >> C = [A B]   %水平拼接
    C =
       1   2   5   6
       3   4   7   8
    >> D = [A;B]   %竖向拼接
    D =
       1   2
       3   4
       5   6
       7   8
    ```

12. 四则运算，默认进行的是矩阵的乘除法：

    ```matlab
    >> A = [1 2; 3 4];
    >> B = [5 6;7 8];
    >> c = 2;
    >> A+B ;A-B;  %对应的元素相加减
    >> A*B        %矩阵的乘法，要求第一个矩阵的列数=第二个矩阵的行数
    ans =
       19   22
       43   50
    >> A/B       %也就是A*B^(-1),是矩阵方程CB=A的解
    ans =
       3  -2
       2  -1
    >> A.*B     %对应元素相乘，要求两个矩阵的行列数相同
    ans =
        5   12
       21   32
    >> A./B    %对应元素相除
    ans =
       0.2000   0.3333
       0.4286   0.5000
    >> A+c     %矩阵和数运算，就是将改数依次和每个元素进行相同的运算。
    ans =
       3   4
       5   6
    %A*c和A.*c是相同的结果。
    >> A^c   %等价于c个矩阵连乘，例如A^3为A*A*A  只有A是方阵,才有意义
    ans =
        7   10
       15   22
    >> A.^c   %每个元素都进行乘方运算
    ans =
        1    4
        9   16
    >> A'    %矩阵的转置
    ans =
       1   3
       2   4
    ```

13. 特殊的矩阵：

    ```matlab
    eye(3)     %3阶单位矩阵,eye(2,4)为2行4列的单位矩阵，多余的行或列全为0。
    zeros(3,4) %3行4列的零矩阵,zeros(3)为3阶零矩阵。
    ones(2,4)  %2行4列的全为1的矩阵。ones(3)为3阶全为1的矩阵
    diag([1 2 3 4])  %对角矩阵，只有对角线非零，对角线元素依次为1 2 3 4
    rand(3)    %3阶均匀分布的随机矩阵，取值范围为0到1。rand(2,3)为2行3列的均匀分布的随机矩阵
    ```

14. 矩阵相关的函数，下面的所有操作都不改变矩阵本身：

    ```matlab
    >> A = [1 2 3; 0 5 6;7 0 9]
    A =
       1   2   3
       0   5   6
       7   0   9
    >> max(A)    %相当于对矩阵的列向量组执行max函数。找出每一列的最大值。如果要求每一行的最大值，可以用max(A')  结果都是1x3的向量
    ans =
       7   5   9
    >> sum(A)    %对每一列求和
    ans =
        8    7   18
    >> mean(A)   %对每一列求平均值
    ans =
       2.6667   2.3333   6.0000
    >> sort(A)   %对每一列单独进行排序,从小到大
    ans =
       0   0   3
       1   2   6
       7   5   9
    >> sortrows (A, 2)  %按照第2列升序排序,整行联动。第二个参数，默认为1
    ans =
       7   0   9
       1   2   3
       0   5   6
    >> sortrows (A, -2) %按照第2列降序排序,整行联动
    ans =
       0   5   6
       1   2   3
       7   0   9
    >> size(A) %获取A的维度，结果为一个行向量  size(A(:,1))结果为[3 1]
    ans =
       3   3
    >> length([1 2 3]) %专门用来获取向量的长度，结果为一个整数
    ans = 3
    >> size([1 2 3])  %用size也可以获取向量的维度，不过会当作矩阵来处理，某一个方向的维度为1
    ans =
       1   3
    >>  find(A == 3)  %查找元素等于5的那个索引,也就是说A(7)等于3。实际上A==5的结果是一个和A同维度的逻辑矩阵，等于5的位置为真，也就是1，反之为假，也就是0。
    ans = 7
    ```
    

# 结构化程序

1. 脚本需要先存储为.m文件才可以运行。脚本文件中的每一行都建议用；结尾，这样可以只输出想要输出的。

2. %之后的内容为单行注释，两个%%中间的为一个section，代码块。

3. 流程控制语句，if，while，for都必须用end结尾：

   ```matlab
   %%%%%%%%%%%%
   if 条件1        %esleif 和else都可以省略
   	语句1
   elseif 条件2
   	语句2
   else 条件3
   	语句3
   end   %不能省略
   %%%%%%%%%%
   switch 表达式    %表达式的结果是一个数
   case 值1
   	语句1
   case 值2
   	语句2
   ...
   otherwise     %如果以上都不满足，最终会执行到这里
   	语句n
   end
   %%%%%%%%%%
   while 表达式    %先判断表达式，为真的话执行语句，然后再判断表达式，循环往复。
   	语句
   end
   %%%%
   for 变量=起点:增量:终点
   	语句
   end
   %%%%
   break      %终止本层循环
   continue   %跳过本次循环中未执行的代码
   ```

4. 关系运算符，结果为logical类型的，1表示真，0表示假：

   ```matlab
   <  % 小于
   <= % 小于等于
   >  % 大于
   >= % 大于等于
   == % 是否相等
   ~= % 是否不相等
   && % 逻辑与
   || % 逻辑或
   ```

5. 部分符号和数字之间必须有空格，例如

   ```matlab
   >> a += 1;
   >> a +=1;   %会报错
   error: a used as variable and later as function
   ```

6. 脚本的开头建议执行一下几条语句：

   ```matlab
   clear all   %清理所有的变量
   close all   %关闭所有的图片
   clc         %清理显示终端
   ```

7. 函数和脚本类似，不过脚本没有输入参数和输出结果，所有的变量都是在全局空间中的。

8. 函数的定义，文件名需要和函数名相同，文件需要放在matlab的路径下，才能搜索到，所有的输入和输出都是可选的，调用时不检查参数：

   ```matlab
   function y = mean(x,dim,flag)      %3个参数,将y作为输出返回,最后可以没有end
   
   function [y,v] = mean(x,dim,flag)  %若要返回多个值，可以用向量包裹起来，
   [a b] = mean(1,2,3)                %调用的时候也用向量来接受
   ```

9. 函数会有一些默认的变量：

   ```matlab
   mfilename  %当前函数所在的m文件的名称
   nargin     %输入参数的个数
   nargout    %输出参数的个数
   varargin   %输入参数的维度
   varargout  %输出参数的维度
   
   ```
   
10. 函数句柄，也就是匿名函数：

    ```matlab
    f = @(x) exp(-2*x);   %x是输入变量，后面是函数体
    ```

10. 

15. 