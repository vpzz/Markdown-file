# 绪论

1. 电子技术的高集成度是体现在数字电路中的，模拟电路很少做高集成度的。
2. 数字电路使用离散的电压序列来表示信息。bit是binary digit的缩写。
3. 扔一枚骰子，结果要用2进制编码，最少需要3位。因为$2^3>6>2^2$。扔两枚骰子，有36种情况，用三进制编码，最少需要$log_3^{36}=3.26$，即4位3进制数才可以。
4. 编码就是对信息进行描述和代表。不能重复，唯一性。
5. 一个数字串可以按照数制来解读（表示数值大小），也可以按照码制来解读（不同位数表示事物的规则）。
6. 2000年之前的年份一般表达为后两位，例如 1987年为87。
7. 二进制中需要使用类似十进制的负号来记录数的正负。用一位二进制数来记录。同时还要兼容加减乘除运算。
8. 在定点运算中，最高位为符号位，0为正，1为负。
9. +5 =0 0101       -5=1 0101     二者相加后的二进制数，不等于0。因此不能直接使用1位表示正负号。同时，这样会出现$+0$和$-0$的表示不一致。
10. 上边的定义存在一个问题，它使用了码制来表示符号，使用了数制来表示数的大小。又期望它能满足数制的运算，这是不科学的。
11. 因此使用补码来解决问题，最高位从之前的只代表符号变成==既代表符号又具有权值==的位。
12. N为二进制数，最高位的权值为$-2^{N-1}$。其余位的权值不变。
13. ![1589336591348](数字电路基础.assets/1589336591348.png)
14. 因此，最大的正数为0111111……，最小的负数为10000……
15. 由原来的无符号数$0\to(2^N-1)$的范围变成了$(-2^{N-1})\to(2^{N-1}-1)$的范围。数的个数没有变，还是$2^N$个。
16. 例如要求一个负数的补码，先求它对应的正数的补码（正数的补码是它本身），然后按位取反，再加1（如果是带小数的，则加在最后一位）。
17. 例如：5位有符号二进制数，能表示的范围为$-16\to 15$。       求-12的表示，先求12的表示。01100，再求反码10011，再加1，10100。验证12+(-12)=01100+10100=100000。而数的范围是5位，最高位溢出。结果为00000。即0。
18. 一个数和它的反码相加为1111……，然后再加1，就变成了10000……利用溢出的特性，得到了0。这样定义的数的表示遵从了运算规则。
19. 在进行位数扩展时，正数直接补0，负数直接补1（在原来的符号位前加1，则原来的符号位变为数值位，但是两个数的总和还是和原来一样）。例如将5位有符号二进制数扩充到6位：01100→001100。10100→110100   后四位和它的权值没有发生变化，所以代表的数也不变。原来的最高位代表-16，现在的最高位和次高位的和为-32+16=-16和原来一样。
20. 因此对补码来说，从左往右数，出现相连的1或0，都表示这个数可以被简化。1110110可以被简化为10110，最高位始终代表符号位。
21. 如果位数选择合适（即不出现溢出），结果的符号位就是两个加数的符号位还有数字位的进位（如果有的话）之和。这是补码的一个优点。
22. 进行数值运算前，首先要选择位数，考虑运算数的位数，还要考虑结果的位数。
23. 如果发生溢出，正数会变成负数，负数会变成正数。因为有符号数的表示是有范围的。
24. 数字电路中使用二进制，表示数量（数制）成为二进制，表达事物（码制，没有权值）成为二值逻辑。
25. 数量一般参与数值运算，逻辑一般参与逻辑运算。
26. 等长编码：每个事物分得的码的长度是一样的。
27. BCD码就是将十进制当做一串数字的事物来编码。
28. 4位的BCD（binary code decimal）码，把一个十进制数的每一位单独用4个二进制数表示。例如
29. ：26→2 6→0010 0110
30. 十进制码不是唯一的，因为4位二进制可以表示16个数，1位10进制只有10个数。
31. 8421码在进位上存在缺陷，例如2+9=0010+1001=1011这个码不在8421码之内，不能正确产生进位的信号。
32. 余三码的提出解决了进位信号的问题。2+9=0101+1100=10001，最高位表示进位信号。然后对和进行修正，如果有进位，结果+3，如果没进位，结果-3。结果变成0100即余三码的1。也就是2+9的结果中仍然保留在个位的1。
33. ![1589339970874](数字电路基础.assets/1589339970874.png)
34. 格雷码：相邻数的编码只有一位不同。这样可以通过不同位的个数来判断距离的远近。
35. ![1589343072363](数字电路基础.assets/1589343072363.png)
36. 变长度编码有哈夫曼编码等，根据概率（统计的观点）来对经常出现的内容使用短的编码，不经常出现的使用长的编码。
37. 哈夫曼编码：对带编码的内容进行概率排序，按照概率大小排放在二叉树上，然后对二叉树的节点赋予0或1。对应的内容的编码就是从根节点到该叶子节点所经过的0或1。解码也比较方便。因为编码中不会出现一个内容的码和另一个内容的码的前缀相同。
38. 所有的字符都是在叶子结点，叶子结点是没有子女的，因此前缀编码不会产生歧义。
39. ![1589343617248](数字电路基础.assets/1589343617248.png)
40. 通过编码，把现实世界中的内容转换成0，1的表达，然后变成电信号。

# 逻辑代数

1. 逻辑代数的起源是哲学问题。香农提出逻辑和数字电路相关联。
2. 逻辑与：写成A&B或A·B或AB。
3. ![image-20210531130408014](数字电路基础.assets/image-20210531130408014.png)
4. 逻辑或：写成A|B或A+B
5. ![image-20210531130525755](数字电路基础.assets/image-20210531130525755.png)
6. 逻辑非：写成 not A或A'
7. <img src="数字电路基础.assets/image-20210531130658501.png" alt="image-20210531130658501" style="zoom: 67%;" />
8. 凡是在逻辑图中遇到○，则表示取反。输入或输出中都是这样的。
9. 复杂逻辑是简单逻辑的组合。
10. 异或：$$A \oplus B$$，相异的时候，才是1。异或也成为了模2加运算，用基本逻辑来表示为$A \oplus B=AB'+A'B$。XOR表示exclusive or
11. ![1589345270167](数字电路基础.assets/1589345270167.png)
12. 使用与或非来构造异或，由真值表，可以说明，当A=0且B=1或者A=1且B=0时，$$A \oplus B=1$$。
13. A=0是A'的真值表中输出为1的输入。
14. 那么A=0且B=1是A'& B的输出为真的输入。A=1且B=0是A&B'。
15. 因此A=0且B=1或者A=1且B=0是(A'B)+(AB')的输出为1对应的输入。
16. 同或是异或的输出取反。$A\odot B$。XNOR
17. ![1589345887340](数字电路基础.assets/1589345887340.png)
18. 逻辑乘法和加法满足分配率，交换律等。
19. $(A+B)(A+C)=A+BC$。$AA=A$ 
20. 德摩根律：$(A+B)'=A'B'$     $(AB)'=A'+B'$
21. 吸收律：$A+AB=A(1+B)=A$ 
22. 代入定理：$(AB)'=A'+B'$将BC代入原式中的B，则$(ABC)'=A'+(BC)'=A'+B'+C'$ 
23. 反演定理：任意逻辑式$Y$都存在一个对偶的式子$Y'$，将原式的与或对调，0，1对调，原变量变反变量，反变量变原变量。变换顺序：先括号，然后与最后或。不属于单个变量上的反号保留不变。
24. 反演定理是通过调整输入，来获得相反的结果，而较为简单的方法是对输出反相。
25. 逻辑函数：$y=F(A,B,C,\cdots)$ 逻辑变量为输入，运算结果为输出。在二值逻辑中，输入输出都只有0/1。
26. 逻辑函数的表示方法：
27. ![1589367117184](数字电路基础.assets/1589367117184.png)
28. N变量的逻辑函数一共有$2^{2^N}=4^N$个，输入的组合有$2^N$个，相当于真值表的行数，对于每一行，可以有0/1，所以一共有$4^N$种。
29. 波形图：将输入变量所有取值可能与对应的输出变量取值俺时间顺序排列起来画成时间波形。
30. 下图4个输入，一个输出。一共有14种情况，不完整。对于一个完整的波形图，逻辑式可以用输出为真的所有输入组合而来。如果输出为真的情况多于为假的情况，那么就应该先求输出为假的所有输入的组合，然后取反。
31. <img src="数字电路基础.assets/1589369932437.png" alt="1589369932437" style="zoom:50%;" />
32. 可以先将设计的要求用真值表表达出来，然后构建逻辑式，再化简得到电路图。
33. 由逻辑图到逻辑式：
34. ![1589376654420](数字电路基础.assets/1589376654420.png)
35. 与或非三种逻辑可以构成逻辑代数的一个完备集，但是它不是最好的，因为涉及了三种逻辑运算。更方便的是，只用与非门就可以实现与，或，非三种基本逻辑门（不过可能需要多个组合），与非门也是一样的。这样用多个同类的门，可以组合出来任意的门。
36. 逻辑函数的两种标准表达形式：最小项之和，最大项之积。
37. 最小项之和对应于从真值表直接读出的逻辑表达式。
38. 2个变量A，B的最小项包含AB，AB'，A'B，A'B'。对应于真值表的取值可能。
39. 将最小项取值对应的十进制数作为它的下标，给最小项进行编号替代，例如三变量中$m_5$表示$AB'C$。
40. 对于任意的输入组合，有且仅有一个最小项为1。
41. 任何一个逻辑式都可以表达成最小项之和。例如：
42. $Y(A,B,C)=ABC'+BC=ABC'+(A+A')BC=ABC'+ABC+A'BC=\Sigma m(3,6,7)$。
43. 最大项：最小项对应取反。A'+B'  A'+B   A+B'    A+B。每一个最大项对应于真值表为0的一行。例如A'+B对应于A=1，B=0的那一行。和该最大项对应的最小项（AB'）对应同一行。
44. 三变量中最大项也有编号，例如A'+B+C'对应二进制101即$M_5$。该最大项取反得到最小项AB'C，其编号为$m_5$。
45. ![1589382995036](数字电路基础.assets/1589382995036.png)
46. 因此如果$Y(A,B,C)=\Sigma m(3,6,7)=\Pi M(0,1,2,4,5)$
47. 逻辑函数的最简形式：最简与或，即若干乘积项的或→包含的乘积项最少，每个乘积项的因子也最少。
48. A+B=(A+A')(A+B)=AA=+AB+A'A+A'B=A+A'B
49. 公式化简法适用性不强，依赖技巧。
50. 卡诺图化简法：把逻辑函数中的最小项以图形的方式表达出来，几何位置相邻的最小项，在逻辑上也是相邻的，（即只有一个变量不同，可以化简）。
51. 00→01→11→10 都是相邻的。和格雷码的思想相同。卡诺图是将真值表按照格雷码的原则重新排列的。
52. 水平和纵向都是循环的，相邻，即m2和m0是相邻的，m8和m0也是相邻的。
53. ![1589384529959](数字电路基础.assets/1589384529959.png)
54. ![1589384712636](数字电路基础.assets/1589384712636.png)
55. 复杂的情况：m5和m4，m1，m7,m13，m21相邻。n变量的卡诺图，其中每一个都有n个相邻项。
56. ![image-20210531141502441](数字电路基础.assets/image-20210531141502441.png)
57. 卡诺图一般不适用于变量太多的情况。
58. 步骤：①先把逻辑函数表达成最小项之和，在卡诺图中与这些最小项对应的位置填1，其余填0。
59. 也可以直接从逻辑式填写卡诺图。某些项可能对应多个方块。如下图，AB'即A=1，B=0对应的一行。
60. A'BD'即A=0,B=1,D=0。对应于一行（A=0,B=1）和两列（D=0）的交叉点。
61. <img src="数字电路基础.assets/1589385273872.png" alt="1589385273872" style="zoom:50%;" />
62. 尽可能地画大圈，少画圈，圈可以重叠。只能2，4，8个地化简，3个的只能拆成1+2。
63. 下图中画法不唯一，没有8和4个相邻的，只有2个相邻的。尽管都是最简，但是也不唯一。
64. <img src="数字电路基础.assets/1589386824893.png" alt="1589386824893" style="zoom:50%;" />
65. ![1589386878191](数字电路基础.assets/1589386878191.png)
66. 此处也可以找包含0的那个圈，然后取反。
67. ![1589387040542](数字电路基础.assets/1589387040542.png)
68. 卡诺图中如果仅含一个1，一定不能化简，如果含有2个1，有可能能化简，如果含有一半以上的1，则一定能化简。对于两变量的卡诺图，主副对角线上的1是不能化简的，分别对应同或和异或。
69. 对于4变量的卡诺图，如果1都分布在对角线上，间隔分布，则不能化简，此时有8个1，再多则可以被化简。
70. 一些最小项加入逻辑式前后，不影响逻辑式的取值，这种最小项成为无关项，由约束项和任意项组成，
71. 之所以引入无关项，是因为逻辑式中的项越多，越容易化简。
72. 逻辑式抽象于真实世界，但是输入变量的取值并不总是任意的（逻辑变量不独立），对输入变量所加的约束成为约束项。例如一个交通路口的三个红绿黄灯，只有几种可能的情况。
73. ![1589522528957](数字电路基础.assets/1589522528957.png)
74. A，B，C三个变量不独立，因为A+B+C=1。即一个电机要么正转，要么反转，要么停止。
75. 通常用约束条件来描述约束的具体内容，![1589522645690](数字电路基础.assets/1589522645690.png)
76. 将这些恒等于0的最小项称为函数Y1，Y2，Y3的约束项。
77. 由于约束项的值恒为0，所以可以将约束项加入逻辑式中，进一步化简。
78. 还有一种情况，在输入变量某些取值下，逻辑函数值为1或为0不影响**逻辑电路**的功能。
79. 例如对上述电路，规定如果A,B,C三个变量出现2个及以上为1或全为0时，电路能自动断开供电电源。那么此时Y1，Y2，Y3的取值已经无关紧要了，因为电动机肯定会因为断电而停止运行。因此对于该条件，逻辑函数的无关项分别为A'B'C'，A'BC，AB'C，ABC'，A'B'C'。
80. 在卡诺图中，无关项一般画叉号，叉号表示这里可以是0，也可以是1。应该根据化简的方便，合理的取值。
81. ![1589524688564](数字电路基础.assets/1589524688564.png)

# 门电路

1. 电压信号比电流信号更容易产生和观测，有电压可以没电流，但是有电流必定有电压。意味着，电压信号可以低功耗。
2. 电压信号容易受环境干扰（远距离的情况下更明显），遇到RC环节，冲激信号（高低电平的转化）会被拖慢。
3. 连续的电压信号表达信息利用率更高。但是浮点数经过多次运算后失真较大。误差会累积。这也是模拟电路多用于系统的最前端，主要用作传感器信号的接受与放大。很少有大规模的模拟电路，一般是小模拟，大数字。
4. 数字系统的抗干扰能力强。模拟电路中，三极管等器件一般工作在一个状态，而用于数字电路的MOS管是在不断切换状态的，当做开关使用。
5. 如果要传输，原来可以直接传输的浮点数，则需要先对其进行二进制化，然后要么一个一个地传输（一个数据信道，挨个传，付出时间的代价），要么一次传输多个（多个数据信道，空间的代价）。
6. 数字电路的元器件要满足两个特征：
   1. 输出高质量的0和1。
   2. 对输入的0和1没有过高的要求。
7. 例如0V表示0，1V表示1。但是这不是绝对的，数字0和1都代表一个电压范围。例如0-0.3V为0，0.7V-1V为1。中间的区域为无效区。
8. 无效区越宽，0和1混淆的几率变小，但是不能受任何噪声干扰。无效区越窄，0和1混淆的几率变大。
9. 整个系统中，前后级对于0和1的电压范围应该是统一的。
10. 数字电路的信号在跳变时，会经过无效区，此时的输出是无意义的。
11. 一条连线和两个非门串联是不一样的，后者是可以输出高质量的0和1。导线是数字电路中干扰的来源之一，不是数字电路的元器件。
12. 门电路：gate，表示已经用电子器件实现了逻辑电路了。能够实现基本运算。
13. 一般会采用正逻辑，高电平是1，低电平是0。
14. 最基本的获得高低电平的原理如下：
    1. 当开关闭合时输出低电平，为了防止开关的内阻分压过大，此时应该尽可能地使R较大，
    2. 当开关打开时，输出高电平，需要限流电阻R，但是R越小，电压越高，同时驱动负载的能力强。
15. 可见对于电阻R的需求是矛盾的，输出高电平时，要求其尽可能的小，输出高电平时，要求其尽可能地大。因此由于这种性质的存在，导致对于高低电平的定义是一个范围。
16. ![1589949350792](数字电路基础.assets/1589949350792.png)
17. 数字电路中，二极管通常看做理想二极管和电压源（开启电压0.7V）串联。
18. 先定义输入的高低电平值，一般为VCC和0V。
19. 利用二极管来充当前述的开关，但是这个开关需要分压0.7V。
20. <img src="数字电路基础.assets/1589950481881.png" alt="1589950481881" style="zoom:50%;" />
21. 利用二极管的钳位作用，两端开路电压高的二极管优先导通，把公共点电位钳制住使得和它并联的元器件两端电压为二极管的压降。钳位通常被看做是一种过压保护技术 。
22. 二极管的初始电阻非常大，导致分压大，导通后，电阻迅速降低，如果外界电压要升高，二极管电流会迅速增大，导致与之串联的电阻分压增大，进而稳定二极管两端的电压。
23. 下图是二极管与门电路，输出了质量更高的高电平，但是低电平质量降低，发生了偏移。
24. <img src="数字电路基础.assets/1589951136031.png" alt="1589951136031" style="zoom:67%;" />
25. 二极管构成逻辑电路的缺点：电平有偏移，带负载能力差，只能用于IC电路内部。对高低电平的定义不同。

## MOS开关

1. MOS管做电子开关。N沟道，栅极需要高电平导通；P沟道，栅极需要低电平导通。N管可以看做高电平有效开关，P管可以看做是低电平有效开关。
2. ![1590144762068](数字电路基础.assets/1590144762068.png)
3. CMOS的C是互补的意思complementary。将1个N沟道和1个P沟道的MOS管互补的使用。
4. 使用双开关，根据输入来打开指定的开关，从而调节输出的电平。
5. ![1590145192513](数字电路基础.assets/1590145192513.png)
6. 下图隐含了两条信息：
   1. 两种MOS管的源极和衬底都已经实现连接起来。
   2. 下面的那个N沟道MOS管，源极接地，当输入高电平时，栅极和衬底之间有电场，形成沟道，开关打开。
   3. 上面的那个P沟道的MOS管，源极接电源，当输入低电平时，栅极和沉底之间有电场，形成沟道，开关打开。
7. ![1590145364589](数字电路基础.assets/1590145364589.png)
8. 因此CMOS可以当做反相器来使用。
9. 下图可以看出对输入的要求较低，同时可以输出高质量的高低电平。
10. ![1590146688277](数字电路基础.assets/1590146688277.png)
11. 当输入不高不低时，两个管子都不截止，都导通，此时电流不为0。如果CMOS的两个MOS工艺相同，则变化点发生在中间。
12. 看以看到CMOS电路在高低电平时，是不消耗功率的，只有在切换时才消耗功率。
13. ![1590146695290](数字电路基础.assets/1590146695290.png)
14. 规定了高质量的0和1之后，即可以确定对输入的要求。$V_{OH}-V_{OL}>V_{IH}-V_{IL}$。输出优于输入。
15. ![1590151713546](数字电路基础.assets/1590151713546.png)
16. 输入噪声容限，上一级的输出（接近最差的）接入这一级的输入（能够被识别为有效的）。下面两个公式较小值成为噪声容限。
17. ![1590152033233](数字电路基础.assets/1590152033233.png)
18. CMOS的工作电压VDD可以是多种，不一定是5V。可以通过提高VDD，来提高噪声容限。但是电压越高，功率也会越高，耗电发热就严重。
19. 随着集成度的提高，绝缘层越来越薄。需要有输入保护电路。
20. 当输入电平高于VDD+0.7V，或低于-0.7V，会被二极管钳位。只有当保护电路工作时，输入端才会有电流。
21. ![1590154152102](数字电路基础.assets/1590154152102.png)
22. MOS管本身是有内阻的开启状态时，是在MOS管的线性区，即可变电阻区。
23. CMOS相当于1个有内阻的电压源。
24. 在CMOS反相器的基础上构件与非门，与非运算是完备的逻辑运算。两个N管串联，两个P管并联。
25. ![image-20210601230551113](数字电路基础.assets/image-20210601230551113.png)
26. 场效应管可以用作电子开关，一秒内几十万次的级别。栅极存在一个类似电容的结构，可以存储电势，保持电场强度。因此场效应管打开后，不需要一直维持电压。
42. MOS管长相和三极管差不多，正对着看，从左到右依次为栅极g，漏极d，源极s。
43. 如果没有下拉电阻，栅极的点位不确定，容易受到干扰，例如用手一起触碰一下栅极和漏极，就可以开启MOS管，用手一起碰一下栅极和源极MOS管就会关闭，这是比较危险的。最好的方式是将栅极和电源负极（接地端）用一个下拉电阻串联起来，使得栅极具有默认的低电压。
44. 上拉电阻主要用在输出口上，接电源正极；下拉电阻主要用在输入口上，接电源负极。分别是为相应的端口提供常态稳定的高低点评。
46. <img src="数字电路基础.assets/1589981067004.png" alt="1589981067004" style="zoom:50%;" />
47. 对于三极管的开关电路而言，当三极管导通时，输出低电平，需要上拉电阻来限流，防止烧坏三极管；三极管截止时，输出高电平，充当外电路的负载。
48. 有时候IC内部会集成上下拉电阻，此时可以直接使用，如果没有（开漏或开集电极状态），则需要它来补全电路，同时起限流的作用。
49. VCC表示电路的供电电压，VDD表示设备的工作电压。VSS表示公共接地点的电压。一般来说VCC>VDD。例如ARM芯片中，VCC为5V。一般经过稳压模块将其转换为芯片工作电压VDD 3.3V。
